On/IN this/DT issue/NN with/IN #/# 3/CD ./.
While/IN I/PRP would/MD normally/RB say/VB it/PRP 's/VBZ rarely/RB a/DT good/JJ idea/NN to/TO say/VB something/NN is/VBZ ``/`` always/RB ''/'' the/DT best/JJS way/NN to/TO do/VB something/NN ,/, I/PRP would/MD say/VB that/IN with/IN primary/JJ keys/NNS in/IN databases/NNS ,/, because/IN of/IN the/DT way/NN that/IN data/NNS is/VBZ stored/VBN ,/, with/IN any/DT table/NN of/IN significant/JJ size/NN that/WDT is/VBZ expected/VBN to/TO continue/VB to/TO grow/VB ,/, surrogate/JJ keys/NNS are/VBP nearly/RB always/RB the/DT best/JJS choice/NN ./.
I/PRP sympathize/VBP with/IN @david-t-macknet/ATS about/IN what/WP the/DT data/NN is/VBZ about/IN ,/, but/CC in/IN large/JJ tables/NNS ,/, sorting/VBG your/PRP$ physical/JJ data/NNS by/IN a/DT natural/JJ key/NN could/MD end/VB up/RP taking/VBG a/DT long/JJ time/NN in/IN tables/NNS with/IN millions/NNS of/IN rows/NNS ./.
A/DT PK/ACR on/IN a/DT surrogate/JJ identity/NN always/RB sorts/NNS to/TO the/DT end/NN ./.
I/PRP hate/VBP it/PRP when/WRB developers/NNS use/VBP nested/JJ select/JJ statements/NNS or/CC even/RB functions/VBZ the/DT return/NN the/DT result/NN of/IN a/DT select/JJ statement/NN inside/IN the/DT ``/`` SELECT/COS ''/'' portion/NN of/IN a/DT query/NN ./.
I/PRP 'm/VBP actually/RB surprised/VBN I/PRP do/VBP n't/RB see/VB this/DT anywhere/RB else/RB here/RB ,/, perhaps/RB I/PRP overlooked/VBD it/PRP ,/, although/IN @adam/ATS has/VBZ a/DT similar/JJ issue/NN indicated/VBD ./.
Example/NN :/: SELECT/COB -LRB-/COB SELECT/COB TOP/COB 1/COB SomeValue/COB FROM/COB SomeTable/COB WHERE/COB SomeDate/COB =/COB c.Date/COB ORDER/COB BY/COB SomeValue/COB desc/COB -RRB-/COB As/COB FirstVal/COB ,/COB -LRB-/COB SELECT/COB OtherValue/COB FROM/COB SomeOtherTable/COB WHERE/COB SomeOtherCriteria/COB =/COB c.Criteria/COB -RRB-/COB As/IN SecondVal/COB FROM/COB MyTable/COB c/COB In/IN this/DT scenario/NN ,/, if/IN MyTable/COS returns/VBZ 10000/CD rows/NNS the/DT result/NN is/VBZ as/IN if/IN the/DT query/NN just/RB ran/VBD 20001/CD queries/NNS ,/, since/IN it/PRP had/VBD to/TO run/VB the/DT initial/JJ query/NN plus/CC query/VB each/DT of/IN the/DT other/JJ tables/NNS once/RB for/IN each/DT line/NN of/IN result/NN ./.
Developers/NNS can/MD get/VB away/RB with/IN this/DT working/NN in/IN a/DT development/NN environment/NN where/WRB they/PRP are/VBP only/RB returning/VBG a/DT few/JJ rows/NNS of/IN data/NNS and/CC the/DT sub/NN tables/NNS usually/RB only/RB have/VBP a/DT small/JJ amount/NN of/IN data/NNS ,/, but/CC in/IN a/DT production/NN environment/NN ,/, this/DT kind/NN of/IN query/NN can/MD become/VB exponentially/RB costly/JJ as/IN more/JJR data/NNS is/VBZ added/VBN to/TO the/DT tables/NNS ./.
A/DT better/JJR -LRB-/-LRB- not/RB necessarily/RB perfect/JJ -RRB-/-RRB- example/NN would/MD be/VB something/NN like/IN :/: SELECT/COB s.SomeValue/COB As/COB FirstVal/COB ,/COB o.OtherValue/COB As/COB SecondVal/COB FROM/COB MyTable/COB c/COB LEFT/COB JOIN/COB -LRB-/COB SELECT/COB SomeDate/COB ,/COB MAX/COB -LRB-/COB SomeValue/COB -RRB-/COB as/COB SomeValue/COB FROM/COB SomeTable/COB GROUP/COB BY/COB SomeDate/COB -RRB-/COB s/COB ON/COB c.Date/COB =/COB s.SomeDate/COB LEFT/COB JOIN/COB SomeOtherTable/COB o/COB ON/COB c.Criteria/COB =/COB o.SomeOtherCriteria/COB This/DT allows/VBZ database/NN optimizers/NNS to/TO shuffle/NN the/DT data/NNS together/RB ,/, rather/RB than/IN requery/NN on/IN each/DT record/NN from/IN the/DT main/JJ table/NN and/CC I/PRP usually/RB find/VBP when/WRB I/PRP have/VBP to/TO fix/VB code/NN where/WRB this/DT problem/NN has/VBZ been/VBN created/VBN ,/, I/PRP usually/RB end/VBP up/RP increasing/VBG the/DT speed/NN of/IN queries/NNS by/IN 100/CD %/SYM or/CC more/JJR while/IN simultaneously/RB reducing/VBG CPU/ACR and/CC memory/NN usage/NN ./.
