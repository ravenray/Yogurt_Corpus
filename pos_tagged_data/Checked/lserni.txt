Gaah/UH ,/, @Jon/ATS ,/, I/PRP was/VBD all/DT bubbly/RB and/CC happily/RB writing/VBG my/PRP$ answer/NN ,/, and/CC not/RB only/RB you/PRP beat/VBP me/PRP to/TO the/DT punch/NN ,/, my/PRP$ answer/NN does/VBZ not/RB even/RB apply/VB anymore/RB ./.
*/EMO cries/EMO */EMO The/DT bad/JJ answer/NN :/: Specifically/RB ,/, can/MD you/PRP think/VB of/IN any/DT examples/NNS of/IN SQL/ACR injection/NN that/WDT would/MD succeed/VB despite/IN the/DT input/NN strings/NNS being/VBG escaped/VBN -LRB-/-LRB- using/VBG mysql_escape_string/COS -RRB-/-RRB- ?/.
Not/RB reliably/RB ./.
You/PRP are/VBP referring/VBG to/TO mysql_escape_string/COS -LRB-/COS -RRB-/COS ,/, which/WDT does/VBZ not/RB take/VB into/IN account/NN the/DT connection/NN encoding/NN -LRB-/-LRB- while/IN mysql_real_escape_string/COS -LRB-/COS -RRB-/COS does/VBZ -RRB-/-RRB- ./.
So/RB maybe/RB a/DT carefully/RB crafted/VBN string/NN ,/, with/IN a/DT carefully/RB crafted/VBN incomplete/JJ UTF8/COS codepoint/NN in/IN front/NN ,/, might/MD result/VB in/IN ,/, say/VB ,/, a/DT quote/NN sign/NN being/VBG escaped/VBN by/IN mysql_escape_string/COS -LRB-/COS -RRB-/COS but/CC the/DT escape/NN itself/PRP being/VBG ignored/VBN by/IN MySQL/COS since/IN it/PRP will/MD ``/`` see/VB ''/'' it/PRP as/IN an/DT UTF8/COS character/NN ./.
E.g./FW :/. 0xC2/COB '/COB OR/COB 1/COB =/COB 1/COB OR/COB 0xC2/COB '/COB would/MD be/VB escaped/VBN by/IN mysql_escape_string/COS -LRB-/COS -RRB-/COS as/IN 0xC2/COB \/COB '/COB OR/COB 1/COB =/COB 1/COB ;/COB --/COB which/WDT would/MD be/VB assembled/VBN to/TO WHERE/COB password/COB =/COB '/COB 0xC2/COB \/COB '/COB OR/COB 1/COB =/COB 1/COB ;/COB --/COB '/COB ;/COB and/CC seen/VBN by/IN MySQL/COS -LRB-/-LRB- if/IN the/DT proper/JJ connection/NN encoding/NN was/VBD in/IN effect/NN -RRB-/-RRB- as/IN ,/, say/VBP ,/, WHERE/COB password/COB =/COB '/COB $/COB '/COB OR/COB 1/COB =/COB 1/COB ;/COB --/COB '/COB ;/COB which/WDT would/MD be/VB a/DT classic/JJ SQL/ACR injection/NN ./.
But/CC this/DT plays/VBZ on/IN the/DT fact/NN that/IN you/PRP specified/VBD ,/, maybe/RB through/IN distraction/NN ,/, a/DT doubly/RB deprecated/VBN function/NN ./.
If/IN you/PRP really/RB were/VBD referring/VBG to/TO mysql_real_escape_string/COS -LRB-/COS -RRB-/COS ,/, then/RB it/PRP would/MD not/RB work/VB ./.
Also/RB ,/, this/DT assumes/VBZ that/IN neither/PDT the/DT server/NN ,/, nor/CC the/DT application/NN layer/NN -LRB-/-LRB- e.g./FW PHP/ACR -RRB-/-RRB- employs/VBZ any/DT kind/NN of/IN charset/COS validation/NN when/WRB populating/VBG the/DT input/NN ./.
If/IN they/PRP did/VBD ,/, the/DT invalid/JJ UTF8/COS would/MD be/VB deleted/VBN on/IN arrival/NN ,/, and/CC never/RB even/RB be/VB seen/VBN by/IN mysql_escape_string/COS ,/, which/WDT would/MD then/RB of/IN course/NN be/VB enough/RB ./.
The/DT real/JJ answer/NN :/: Do/VBP not/RB use/VB mysql_escape_string/COS -LRB-/-LRB- or/CC mysql_whatever/COS -RRB-/-RRB- at/IN all/DT ./.
They/PRP 've/VBP been/VBN deprecated/VBN and/CC your/PRP$ code/NN might/MD stop/VB working/VBG ./.
Use/VBP PDO/ACR functions/NNS instead/RB ./.
